// Spectrum Colorpicker v1.2.0
// https://github.com/bgrins/spectrum
// Author: Brian Grinstead
// License: MIT
(function(E,f,xa){function oa(d,f,l){for(var q=[],s=0;s<d.length;s++){var r=d[s];if(r){var p=tinycolor(r),k=0.5>p.toHsl().l?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light",k=k+(tinycolor.equals(f,r)?" sp-thumb-active":""),r=ya?"background-color:"+p.toRgbString():"filter:"+p.toFilter();q.push('<span title="'+p.toRgbString()+'" data-color="'+p.toRgbString()+'" class="'+k+'"><span class="sp-thumb-inner" style="'+r+';" /></span>')}else q.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="sp-clear-display"></span>')}return"<div class='sp-cf "+l+"'>"+q.join("")+"</div>"}function Ja(d,y){var l=f.extend({},ea,d);l.callbacks={move:A(l.move,y),change:A(l.change,y),show:A(l.show,y),hide:A(l.hide,y),beforeShow:A(l.beforeShow,y)};return l}function pa(d,y){function l(){a.showPaletteOnly&&(a.showPalette=!0);n.toggleClass("sp-flat",b);n.toggleClass("sp-input-disabled",!a.showInput);n.toggleClass("sp-alpha-enabled",a.showAlpha);n.toggleClass("sp-clear-enabled",Q);n.toggleClass("sp-buttons-disabled",!a.showButtons);n.toggleClass("sp-palette-disabled",!a.showPalette);n.toggleClass("sp-palette-only",a.showPaletteOnly);n.toggleClass("sp-initial-disabled",!a.showInitial);n.addClass(a.className);K()}function q(a){if(c){a=tinycolor(a).toRgbString();if(-1===f.inArray(a,L))for(L.push(a);L.length>ea;)L.shift();if(m&&E.localStorage)try{E.localStorage[m]=L.join(";")}catch(b){}}}function s(){var b=[],c=L,d={},m;if(a.showPalette){for(var g=0;g<fa.length;g++)for(var h=0;h<fa[g].length;h++)m=tinycolor(fa[g][h]).toRgbString(),d[m]=!0;for(g=0;g<c.length;g++)m=tinycolor(c[g]).toRgbString(),d.hasOwnProperty(m)||(b.push(c[g]),d[m]=!0)}return b.reverse().slice(0,a.maxSelectionSize)}function r(){var a=e(),b=f.map(fa,function(b,c){return oa(b,a,"sp-palette-row sp-palette-row-"+c)});L&&b.push(oa(s(),a,"sp-palette-row sp-palette-row-selection"));za.html(b.join(""))}function p(){if(a.showInitial){var b=M,c=e();Aa.html(oa([b,c],c,"sp-palette-row-initial"))}}function k(){(0>=I||0>=T||0>=ga)&&K();n.addClass(Ba);N=null}function z(){n.removeClass(Ba)}function B(){var a=O.val();null!==a&&""!==a||!Q?(a=tinycolor(a),a.ok?t(a):O.addClass("sp-validation-error")):t(null)}function Ca(){F?C():qa()}function qa(){var b=f.Event("beforeShow.spectrum");if(F)K();else if(v.trigger(b,[e()]),!1!==h.beforeShow(e())&&!b.isDefaultPrevented()){for(b=0;b<G.length;b++)G[b]&&G[b].hide();F=!0;f(ra).bind("click.spectrum",C);f(E).bind("resize.spectrum",g);U.addClass("sp-active");n.removeClass("sp-hidden");a.showPalette&&r();K();x();M=e();p();h.show(M);v.trigger("show.spectrum",[M])}}function C(a){a&&"click"==a.type&&2==a.button||!F||b||(F=!1,f(ra).unbind("click.spectrum",C),f(E).unbind("resize.spectrum",g),U.removeClass("sp-active"),n.addClass("sp-hidden"),tinycolor.equals(e(),M)||(pa&&"cancel"!==a?J(!0):t(M,!0)),h.hide(e()),v.trigger("hide.spectrum",[e()]))}function t(a,b){if(!tinycolor.equals(a,e())){var c;if(!a&&Q)P=!0;else{P=!1;c=tinycolor(a);var d=c.toHsv();W=d.h%360/360;X=d.s;Y=d.v;R=d.a}x();c&&c.ok&&!b&&(Z=sa||c.format)}}function e(a){a=a||{};return Q&&P?null:tinycolor.fromRatio({h:W,s:X,v:Y,a:Math.round(100*R)/100},{format:a.format||Z})}function w(){x();h.move(e());v.trigger("move.spectrum",[e()])}function x(){O.removeClass("sp-validation-error");Da();var b=tinycolor.fromRatio({h:W,s:1,v:1});ha.css("background-color",b.toHexString());b=Z;1>R&&("hex"===b||"hex3"===b||"hex6"===b||"name"===b)&&(b="rgb");var c=e({format:b}),d="";V.removeClass("sp-clear-display");V.css("background-color","transparent");if(!c&&Q)V.addClass("sp-clear-display");else{var d=c.toHexString(),m=c.toRgbString();ya||1===c.alpha?V.css("background-color",m):(V.css("background-color","transparent"),V.css("filter",c.toFilter()));if(a.showAlpha){m=c.toRgb();m.a=0;var m=tinycolor(m).toRgbString(),g="linear-gradient(left, "+m+", "+d+")";$?aa.css("filter",tinycolor(m).toFilter({gradientType:1},d)):(aa.css("background","-webkit-"+g),aa.css("background","-moz-"+g),aa.css("background","-ms-"+g),aa.css("background",g))}d=c.toString(b)}a.showInput&&O.val(d);a.showPalette&&r();p()}function Da(){var a=X,b=Y;Q&&P?(ia.hide(),ja.hide(),ka.hide()):(ia.show(),ja.show(),ka.show(),a*=T,b=I-b*I,a=Math.max(-S,Math.min(T-S,a-S)),b=Math.max(-S,Math.min(I-S,b-S)),ka.css({top:b,left:a}),ia.css({left:R*ta-A/2}),ja.css({top:W*ga-D}))}function J(a){var b=e(),c="",d=!tinycolor.equals(b,M);b&&(c=b.toString(Z),q(b));la&&v.val(c);M=b;a&&d&&(h.change(b),v.trigger("change",[b]))}function K(){T=ha.width();I=ha.height();S=ka.height();ua.width();ga=ua.height();D=ja.height();ta=Ea.width();A=ia.width();b||(n.css("position","absolute"),n.offset(Ka(n,ba)));Da()}function H(){C();va=!0;v.attr("disabled",!0);ba.addClass("sp-disabled")}var a=Ja(y,d),b=a.flat,c=a.showSelectionPalette,m=a.localStorageKey,u=a.theme,h=a.callbacks,g=La(K,10),F=!1,T=0,I=0,S=0,ga=0,ta=0,A=0,D=0,W=0,X=0,Y=0,R=1,ca=a.palette.slice(0),fa=f.isArray(ca[0])?ca:[ca],L=a.selectionPalette.slice(0),ea=a.maxSelectionSize,Ba="sp-dragging",N=null,ra=d.ownerDocument,v=f(d),va=!1,n=f(Ma,ra).addClass(u),ha=n.find(".sp-color"),ka=n.find(".sp-dragger"),ua=n.find(".sp-hue"),ja=n.find(".sp-slider"),aa=n.find(".sp-alpha-inner"),Ea=n.find(".sp-alpha"),ia=n.find(".sp-alpha-handle"),O=n.find(".sp-input"),za=n.find(".sp-palette"),Aa=n.find(".sp-initial"),Fa=n.find(".sp-cancel"),Ga=n.find(".sp-clear"),Ha=n.find(".btn"),la=v.is("input"),ca=la&&Ia&&"color"===v.attr("type"),wa=la&&!b,U=wa?f(Na).addClass(u).addClass(a.className):f([]),ba=wa?U:v,V=U.find(".sp-preview-inner"),da=a.color||la&&v.val(),M=!1,sa=a.preferredFormat,Z=sa,pa=!a.showButtons||a.clickoutFiresChange,P=!da,Q=a.allowEmpty&&!ca;(function(){function c(a){a.data&&a.data.ignore?(t(f(this).data("color")),w()):(t(f(this).data("color")),J(!0),w(),C());return!1}$&&n.find("*:not(input)").attr("unselectable","on");l();wa&&v.after(U).hide();Q||Ga.hide();if(b)v.after(n).hide();else{var d="parent"===a.appendTo?v.parent():f(a.appendTo);1!==d.length&&(d=f("body"));d.append(n)}if(m&&E.localStorage){try{var g=E.localStorage[m].split(",#");1<g.length&&(delete E.localStorage[m],f.each(g,function(a,b){q(b)}))}catch(h){}try{L=E.localStorage[m].split(";")}catch(e){}}ba.bind("click.spectrum touchstart.spectrum",function(a){va||Ca();a.stopPropagation();f(a.target).is("input")||a.preventDefault()});(v.is(":disabled")||!0===a.disabled)&&H();n.click(Oa);O.change(B);O.bind("paste",function(){setTimeout(B,1)});O.keydown(function(a){13==a.keyCode&&B()});Fa.text(a.cancelText);Fa.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();C("cancel")});Ga.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();P=!0;w();b&&J(!0)});Ha.text(a.chooseText);Ha.bind("click.spectrum",function(a){a.stopPropagation();a.preventDefault();O.hasClass("sp-validation-error")||(J(!0),C())});ma(Ea,function(a,b,c){R=a/ta;P=!1;c.shiftKey&&(R=Math.round(10*R)/10);w()});ma(ua,function(a,b){W=parseFloat(b/ga);P=!1;w()},k,z);ma(ha,function(a,b,c){c.shiftKey?N||(c=I-Y*I,N=Math.abs(a-X*T)>Math.abs(b-c)?"x":"y"):N=null;c=!N||"y"===N;N&&"x"!==N||(X=parseFloat(a/T));c&&(Y=parseFloat((I-b)/I));P=!1;w()},k,z);da?(t(da),x(),Z=sa||tinycolor(da).format,q(da)):x();b&&qa();d=$?"mousedown.spectrum":"click.spectrum touchstart.spectrum";za.delegate(".sp-thumb-el",d,c);Aa.delegate(".sp-thumb-el:nth-child(1)",d,{ignore:!0},c)})();var na={show:qa,hide:C,toggle:Ca,reflow:K,option:function(b,c){if(b===xa)return f.extend({},a);if(c===xa)return a[b];a[b]=c;l()},enable:function(){va=!1;v.attr("disabled",!1);ba.removeClass("sp-disabled")},disable:H,set:function(a){t(a);J()},get:e,destroy:function(){v.show();ba.unbind("click.spectrum touchstart.spectrum");n.remove();U.remove();G[na.id]=null},container:n};na.id=G.push(na)-1;return na}function Ka(d,y){var l=d.outerWidth(),q=d.outerHeight(),s=y.outerHeight(),r=d[0].ownerDocument,p=r.documentElement,k=p.clientWidth+f(r).scrollLeft(),r=p.clientHeight+f(r).scrollTop(),p=y.offset();p.top+=s;p.left-=Math.min(p.left,p.left+l>k&&k>l?Math.abs(p.left+l-k):0);p.top-=Math.min(p.top,p.top+q>r&&r>q?Math.abs(q+s-0):0);return p}function D(){}function Oa(d){d.stopPropagation()}function A(d,f){var l=Array.prototype.slice,q=l.call(arguments,2);return function(){return d.apply(f,q.concat(l.call(arguments)))}}function ma(d,y,l,q){function s(d){d.stopPropagation&&d.stopPropagation();d.preventDefault&&d.preventDefault();d.returnValue=!1}function r(e){if(z){if($&&9>document.documentMode&&!e.button)return p();var f=e.originalEvent.touches,k=f?f[0].pageY:e.pageY,f=Math.max(0,Math.min((f?f[0].pageX:e.pageX)-B.left,D)),k=Math.max(0,Math.min(k-B.top,A));C&&s(e);y.apply(d,[f,k,e])}}function p(){z&&(f(k).unbind(t),f(k.body).removeClass("sp-dragging"),q.apply(d,arguments));z=!1}y=y||function(){};l=l||function(){};q=q||function(){};var k=d.ownerDocument||document,z=!1,B={},A=0,D=0,C="ontouchstart"in E,t={};t.selectstart=s;t.dragstart=s;t["touchmove mousemove"]=r;t["touchend mouseup"]=p;f(d).bind("touchstart mousedown",function(e){(e.which?3==e.which:2==e.button)||z||!1===l.apply(d,arguments)||(z=!0,A=f(d).height(),D=f(d).width(),B=f(d).offset(),f(k).bind(t),f(k.body).addClass("sp-dragging"),C||r(e),s(e))})}function La(d,f,l){var q;return function(){var s=this,r=arguments,p=function(){q=null;d.apply(s,r)};l&&clearTimeout(q);if(l||!q)q=setTimeout(p,f)}}var ea={beforeShow:D,move:D,change:D,show:D,hide:D,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"Select",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},G=[],$=!!/msie/i.exec(E.navigator.userAgent),ya=function(){var d=document.createElement("div").style;d.cssText="background-color:rgba(0,0,0,.5)";return!!~(""+d.backgroundColor).indexOf("rgba")||!!~(""+d.backgroundColor).indexOf("hsla")}(),Ia=function(){var d=f("<input type='color' value='!' />")[0];return"color"===d.type&&"!"!==d.value}(),Na="<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'></div></div><div class='sp-dd'>&#9660;</div></div>",Ma=function(){var d="";if($)for(var f=1;6>=f;f++)d+="<div class='sp-"+f+"'></div>";return["<div class='sp-container sp-hidden'><div class='sp-palette-container'><div class='sp-palette sp-thumb sp-cf'></div></div><div class='sp-picker-container'><div class='sp-top sp-cf'><div class='sp-fill'></div><div class='sp-top-inner'><div class='sp-color'><div class='sp-sat'><div class='sp-val'><div class='sp-dragger'></div></div></div></div><div class='sp-clear sp-clear-display' title='Clear Color Selection'></div><div class='sp-hue'><div class='sp-slider'></div>",d,"</div></div><div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div></div><div class='sp-input-container sp-cf'><input class='sp-input' type='text' spellcheck='false'  /></div><div class='sp-initial sp-thumb sp-cf'></div><div class='sp-button-container sp-cf'><a class='sp-cancel' href='#'></a><button class='btn btn-primary'></button></div></div></div>"].join("")}();f.fn.spectrum=function(d,y){if("string"==typeof d){var l=this,q=Array.prototype.slice.call(arguments,1);this.each(function(){var s=G[f(this).data("spectrum.id")];if(s){var r=s[d];if(!r)throw Error("Spectrum: no such method: '"+d+"'");"get"==d?l=s.get():"container"==d?l=s.container:"option"==d?l=s.option.apply(s,q):"destroy"==d?(s.destroy(),f(this).removeData("spectrum.id")):r.apply(s,q)}});return l}return this.spectrum("destroy").each(function(){var l=pa(this,d);f(this).data("spectrum.id",l.id)})};f.fn.spectrum.load=!0;f.fn.spectrum.loadOpts={};f.fn.spectrum.draggable=ma;f.fn.spectrum.defaults=ea;f.spectrum={};f.spectrum.localization={};f.spectrum.palettes={};f.fn.spectrum.processNativeColorInputs=function(){Ia||f("input[type=color]").spectrum({preferredFormat:"hex6"})};(function(){function d(a,b){a=a?a:"";b=b||{};if("object"==typeof a&&a.hasOwnProperty("_tc_id"))return a;var c=f(a),m=c.r,u=c.g,h=c.b,g=c.a,F=e(100*g)/100,q=b.format||c.format;1>m&&(m=e(m));1>u&&(u=e(u));1>h&&(h=e(h));return{ok:c.ok,format:q,_tc_id:C++,alpha:g,getAlpha:function(){return g},setAlpha:function(a){g=p(a);F=e(100*g)/100},toHsv:function(){var a=s(m,u,h);return{h:360*a.h,s:a.s,v:a.v,a:g}},toHsvString:function(){var a=s(m,u,h),b=e(360*a.h),c=e(100*a.s),a=e(100*a.v);return 1==g?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+F+")"},toHsl:function(){var a=l(m,u,h);return{h:360*a.h,s:a.s,l:a.l,a:g}},toHslString:function(){var a=l(m,u,h),b=e(360*a.h),c=e(100*a.s),a=e(100*a.l);return 1==g?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+", "+c+"%, "+a+"%, "+F+")"},toHex:function(a){return r(m,u,h,a)},toHexString:function(a){return"#"+r(m,u,h,a)},toRgb:function(){return{r:e(m),g:e(u),b:e(h),a:g}},toRgbString:function(){return 1==g?"rgb("+e(m)+", "+e(u)+", "+e(h)+")":"rgba("+e(m)+", "+e(u)+", "+e(h)+", "+F+")"},toPercentageRgb:function(){return{r:e(100*k(m,255))+"%",g:e(100*k(u,255))+"%",b:e(100*k(h,255))+"%",a:g}},toPercentageRgbString:function(){return 1==g?"rgb("+e(100*k(m,255))+"%, "+e(100*k(u,255))+"%, "+e(100*k(h,255))+"%)":"rgba("+e(100*k(m,255))+"%, "+e(100*k(u,255))+"%, "+e(100*k(h,255))+"%, "+F+")"},toName:function(){return 0===g?"transparent":K[r(m,u,h,!0)]||!1},toFilter:function(a){var c=r(m,u,h),f=c,e=Math.round(255*parseFloat(g)).toString(16),k=e,l=b&&b.gradientType?"GradientType = 1, ":"";a&&(a=d(a),f=a.toHex(),k=Math.round(255*parseFloat(a.alpha)).toString(16));return"progid:DXImageTransform.Microsoft.gradient("+l+"startColorstr=#"+z(e)+c+",endColorstr=#"+z(k)+f+")"},toString:function(a){var b=!!a;a=a||this.format;var c=!1,b=!b&&1>g&&0<g&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"name"===a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return b?this.toRgbString():c||this.toHexString()}}}function f(a){var b={r:0,g:0,b:0},c=1,d=!1,e=!1;if("string"==typeof a)a:{a=a.replace(A,"").replace(D,"").toLowerCase();var h=!1;if(J[a])a=J[a],h=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0,format:"name"};break a}var g;a=(g=H.rgb.exec(a))?{r:g[1],g:g[2],b:g[3]}:(g=H.rgba.exec(a))?{r:g[1],g:g[2],b:g[3],a:g[4]}:(g=H.hsl.exec(a))?{h:g[1],s:g[2],l:g[3]}:(g=H.hsla.exec(a))?{h:g[1],s:g[2],l:g[3],a:g[4]}:(g=H.hsv.exec(a))?{h:g[1],s:g[2],v:g[3]}:(g=H.hex6.exec(a))?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16),format:h?"name":"hex"}:(g=H.hex3.exec(a))?{r:parseInt(g[1]+""+g[1],16),g:parseInt(g[2]+""+g[2],16),b:parseInt(g[3]+""+g[3],16),format:h?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))b=a.g,d=a.b,b={r:255*k(a.r,255),g:255*k(b,255),b:255*k(d,255)},d=!0,e="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=B(a.s);a.v=B(a.v);var e=a.h,h=a.s,b=a.v,e=6*k(e,360),h=k(h,100),b=k(b,100),d=t.floor(e),l=e-d,e=b*(1-h);g=b*(1-l*h);h=b*(1-(1-l)*h);d%=6;b={r:255*[b,g,e,e,h,b][d],g:255*[h,b,b,g,e,e][d],b:255*[e,e,h,b,b,g][d]};d=!0;e="hsv"}else a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=B(a.s),a.l=B(a.l),b=q(a.h,a.s,a.l),d=!0,e="hsl");a.hasOwnProperty("a")&&(c=a.a)}c=p(c);return{ok:d,format:a.format||e,r:w(255,x(b.r,0)),g:w(255,x(b.g,0)),b:w(255,x(b.b,0)),a:c}}function l(a,b,c){a=k(a,255);b=k(b,255);c=k(c,255);var d=x(a,b,c),e=w(a,b,c),h,g=(d+e)/2;if(d==e)h=e=0;else{var f=d-e,e=0.5<g?f/(2-d-e):f/(d+e);switch(d){case a:h=(b-c)/f+(b<c?6:0);break;case b:h=(c-a)/f+2;break;case c:h=(a-b)/f+4}h/=6}return{h:h,s:e,l:g}}function q(a,b,c){function d(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}a=k(a,360);b=k(b,100);c=k(c,100);if(0===b)c=b=a=c;else{var e=0.5>c?c*(1+b):c+b-c*b,f=2*c-e;c=d(f,e,a+1/3);b=d(f,e,a);a=d(f,e,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function s(a,b,c){a=k(a,255);b=k(b,255);c=k(c,255);var d=x(a,b,c),e=w(a,b,c),f,g=d-e;if(d==e)f=0;else{switch(d){case a:f=(b-c)/g+(b<c?6:0);break;case b:f=(c-a)/g+2;break;case c:f=(a-b)/g+4}f/=6}return{h:f,s:0===d?0:g/d,v:d}}function r(a,b,c,d){a=[z(e(a).toString(16)),z(e(b).toString(16)),z(e(c).toString(16))];return d&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function p(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function k(a,b){var c=a;"string"==typeof c&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");c="string"===typeof a&&-1!=a.indexOf("%");a=w(b,x(0,parseFloat(a)));c&&(a=parseInt(a*b,10)/100);return 1E-6>t.abs(a-b)?1:a%b/parseFloat(b)}function z(a){return 1==a.length?"0"+a:""+a}function B(a){1>=a&&(a=100*a+"%");return a}var A=/^[\s,#]+/,D=/\s+$/,C=0,t=Math,e=t.round,w=t.min,x=t.max,G=t.random;d.fromRatio=function(a,b){if("object"==typeof a){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]="a"===e?a[e]:B(a[e]));a=c}return d(a,b)};d.equals=function(a,b){return a&&b?d(a).toRgbString()==d(b).toRgbString():!1};d.random=function(){return d.fromRatio({r:G(),g:G(),b:G()})};d.desaturate=function(a,b){b=0===b?0:b||10;var c=d(a).toHsl();c.s-=b/100;c.s=w(1,x(0,c.s));return d(c)};d.saturate=function(a,b){b=0===b?0:b||10;var c=d(a).toHsl();c.s+=b/100;c.s=w(1,x(0,c.s));return d(c)};d.greyscale=function(a){return d.desaturate(a,100)};d.lighten=function(a,b){b=0===b?0:b||10;var c=d(a).toHsl();c.l+=b/100;c.l=w(1,x(0,c.l));return d(c)};d.darken=function(a,b){b=0===b?0:b||10;var c=d(a).toHsl();c.l-=b/100;c.l=w(1,x(0,c.l));return d(c)};d.complement=function(a){a=d(a).toHsl();a.h=(a.h+180)%360;return d(a)};d.triad=function(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+120)%360,s:b.s,l:b.l}),d({h:(c+240)%360,s:b.s,l:b.l})]};d.tetrad=function(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+90)%360,s:b.s,l:b.l}),d({h:(c+180)%360,s:b.s,l:b.l}),d({h:(c+270)%360,s:b.s,l:b.l})]};d.splitcomplement=function(a){var b=d(a).toHsl(),c=b.h;return[d(a),d({h:(c+72)%360,s:b.s,l:b.l}),d({h:(c+216)%360,s:b.s,l:b.l})]};d.analogous=function(a,b,c){b=b||6;c=c||30;var e=d(a).toHsl();c=360/c;a=[d(a)];for(e.h=(e.h-(c*b>>1)+720)%360;--b;)e.h=(e.h+c)%360,a.push(d(e));return a};d.monochromatic=function(a,b){b=b||6;for(var c=d(a).toHsv(),e=c.h,f=c.s,c=c.v,h=[],g=1/b;b--;)h.push(d({h:e,s:f,v:c})),c=(c+g)%1;return h};d.readability=function(a,b){var c=d(a).toRgb(),e=d(b).toRgb(),f=(299*c.r+587*c.g+114*c.b)/1E3,h=(299*e.r+587*e.g+114*e.b)/1E3,c=Math.max(c.r,e.r)-Math.min(c.r,e.r)+Math.max(c.g,e.g)-Math.min(c.g,e.g)+Math.max(c.b,e.b)-Math.min(c.b,e.b);return{brightness:Math.abs(f-h),color:c}};d.readable=function(a,b){var c=d.readability(a,b);return 125<c.brightness&&500<c.color};d.mostReadable=function(a,b){for(var c=null,e=0,f=!1,h=0;h<b.length;h++){var g=d.readability(a,b[h]),k=125<g.brightness&&500<g.color,g=g.brightness/125*3+g.color/500;if(k&&!f||k&&f&&g>e||!k&&!f&&g>e)f=k,e=g,c=d(b[h])}return c};var J=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=d.hexNames=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(J),H={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};E.tinycolor=d})();f(function(){f.fn.spectrum.load&&f.fn.spectrum.processNativeColorInputs()})})(window,jQuery);